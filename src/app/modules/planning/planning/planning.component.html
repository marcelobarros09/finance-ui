<div class="grid">
  <div class="col-12">
    <div class="card p-fluid">
      <h5>
        <i class="pi pi-fw pi-calendar"></i>
        Planning
      </h5>

      <br />

      <form [formGroup]="planningForm" autocomplete="off" (ngSubmit)="save()">
        <div class="p-fluid p-formgrid grid">
          <div class="field col-12 md:col-4">
            <label for="description">Description</label>
            <input
              formControlName="description"
              pInputText
              type="text"
              name="description"
              class="inputfield w-full"
            />
            <app-input-message
              [control]="planningForm.get('description')"
              error="required"
              text="Description is required"
            ></app-input-message>
            <app-input-message
              [control]="planningForm.get('description')"
              error="minlength"
              text="Description must be at least 3 characters"
            ></app-input-message>
            <app-input-message
              [control]="planningForm.get('description')"
              error="maxlength"
              text="Description can have a maximum of 100 characters"
            ></app-input-message>
          </div>

          <div class="field col-12 md:col-4">
            <label for="amount">Amount</label>
            <p-inputNumber
              formControlName="amount"
              mode="currency"
              currency="BRL"
              name="amount"
              class="inputfield w-full"
            >
            </p-inputNumber>
            <app-input-message
              [control]="planningForm.get('amount')"
              error="required"
              text="Amount is required"
            ></app-input-message>
            <app-input-message
              [control]="planningForm.get('amount')"
              error="min"
              text="Amount must be at least 0.01"
            ></app-input-message>
          </div>

          <div class="field col-12 md:col-4">
            <label for="type">Type</label>
            <p-selectButton
              formControlName="type"
              [options]="typeOptions"
              [multiple]="false"
              optionLabel="label"
              optionValue="value"
              name="type"
            ></p-selectButton>
            <app-input-message
              [control]="planningForm.get('type')"
              error="required"
              text="Type is required"
            ></app-input-message>
          </div>

          <div class="field col-12 md:col-4">
            <label for="dueDay">Due day</label>
            <input
              formControlName="dueDay"
              pInputText
              type="number"
              name="dueDay"
              class="inputfield w-full"
            />
            <app-input-message
              [control]="planningForm.get('dueDay')"
              error="required"
              text="Due day is required"
            ></app-input-message>
            <app-input-message
              [control]="planningForm.get('dueDay')"
              error="min"
              text="Due day cannot less than 1"
            ></app-input-message>
            <app-input-message
              [control]="planningForm.get('dueDay')"
              error="max"
              text="Due day cannot greater than 31"
            ></app-input-message>
          </div>

          <div class="field col-12 md:col-4">
            <label for="startAt">Start at</label>
            <p-calendar
              formControlName="startAt"
              dateFormat="mm/yy"
              view="month"
              name="startAt"
              [showIcon]="true"
              [showButtonBar]="true"
            ></p-calendar>
            <app-input-message
              [control]="planningForm.get('startAt')"
              error="required"
              text="Start at is required"
            ></app-input-message>
          </div>

          <div class="field col-12 md:col-4">
            <label for="endAt">End at</label>
            <p-calendar
              formControlName="endAt"
              dateFormat="mm/yy"
              view="month"
              name="endAt"
              [showIcon]="true"
              [showButtonBar]="true"
            ></p-calendar>
            <app-input-message
              [control]="planningForm.get('endAt')"
              error="required"
              text="End at is required"
            ></app-input-message>
          </div>

          <div class="field col-12 md:col-4">
            <label for="active">Active</label>
            <br />
            <p-inputSwitch
              formControlName="active"
              name="active"
              class="inputfield w-full"
            ></p-inputSwitch>
          </div>

          <div class="col-offset-8"></div>

          <div class="field col-12 md:col-3">
            <button
              pButton
              pRipple
              icon="pi pi-save"
              type="submit"
              label="Save"
              class="p-button-rounded p-button-outlined p-button-secondary mr-2 mb-2"
              [disabled]="planningForm.invalid"
            ></button>
          </div>

          <div class="field col-12 md:col-3">
            <button
              pButton
              pRipple
              [routerLink]="['/planning']"
              icon="pi pi-times"
              type="button"
              label="Close"
              class="p-button-rounded p-button-outlined p-button-secondary mr-2 mb-2"
            ></button>
          </div>

          <div class="field col-12 md:col-3">
            <button
              pButton
              pRipple
              [routerLink]="['/planning/new']"
              icon="pi pi-plus"
              type="button"
              label="New"
              class="p-button-rounded p-button-outlined p-button-secondary mr-2 mb-2"
            ></button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
